# –û—Ç—á—ë—Ç –ø–æ —á–µ–∫–∞–º: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å—É–º–º—ã

**–î–∞—Ç–∞:** 07.02.2026  
**–ú–µ—Ç–æ–¥:** `php artisan checks:report` ‚Äî ReceiptParser –Ω–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–º raw_text + –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ + pdftotext –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å null raw_text

---

## –†–µ–∑—é–º–µ

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª-–≤–æ | –ß–µ–∫–∏ |
|-----------|--------|------|
| OK (—Å—É–º–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤–µ—Ä–Ω–æ) | 2 | #1, #5 |
| –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ (legacy vs ReceiptParser) | 5 | #7, #8, #9, #10, #11 |
| –ë–µ–∑ —Å—É–º–º—ã (raw_text –ø—É—Å—Ç) | 6 | #2, #3, #4, #6, #12, **#13** |

---

## –ß–µ–∫ #13 ‚Äî ¬´–≤–æ–æ–±—â–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç¬ª

**–ü—Ä–∏—á–∏–Ω–∞:** OCR –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª raw_text (–∏–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –≤–µ—Ä–Ω—É–ª null). –§–∞–π–ª `telegram/file_81.pdf` ‚Äî **—Ç–µ–∫—Å—Ç–æ–≤—ã–π PDF**.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ pdftotext –Ω–∞–ø—Ä—è–º—É—é:**
```
–°—É–º–º–∞: 10 000,00 —Ä—É–±.
–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–ø–µ—Ä–∞—Ü–∏–∏: 25.01.2026 –≤ 12:02 (–ú–°–ö)
```

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è **legacy** —Ä–µ–∂–∏–º (`receipt_parser_method=legacy`). –ü—Ä–∏ legacy:
1. PDF –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ pdftotext
2. PDF –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚Üí Tesseract OCR
3. Tesseract –¥–∞–ª –º–∞–ª–æ —Ç–µ–∫—Å—Ç–∞ (251 —Å–∏–º–≤–æ–ª) –Ω–∞ –±–æ–ª—å—à–æ–º PDF (4167√ó6600 px)
4. Legacy-–ø–∞—Ä—Å–µ—Ä –Ω–µ –Ω–∞—à—ë–ª —Å—É–º–º—É/–¥–∞—Ç—É ‚Üí checkData = null ‚Üí —Å–æ—Ö—Ä–∞–Ω—ë–Ω —á–µ–∫ –±–µ–∑ —Å—É–º–º—ã –∏ raw_text

**–†–µ—à–µ–Ω–∏–µ:** 
1. –í–∫–ª—é—á–∏—Ç—å **¬´–£–ª—É—á—à–µ–Ω–Ω—ã–π¬ª** —Ä–µ–∂–∏–º –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–æ–∑—ã–≥—Ä—ã—à–∞
2. –î–ª—è —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —á–µ–∫–∞ #13: –Ω–∞–∂–∞—Ç—å **¬´üîÑ –ü–µ—Ä–µ—Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å¬ª** (pdftotext + ReceiptParser)

---

## –ß–µ–∫–∏ —Å –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º —Å—É–º–º—ã (–ë–î ‚â† ReceiptParser)

| –ß–µ–∫ | –ë–î | ReceiptParser | raw_text (–≤—ã–¥–µ—Ä–∂–∫–∞) |
|-----|-----|---------------|---------------------|
| #7 | 100 | 10000 | ¬´–°—É–º–º–∞ 10000¬ª |
| #8 | 100 | 10000 | ¬´–°—É–º–º–∞ 10000¬ª |
| #9 | 807 | 16000 | ¬´–°—É–º–º–∞ 16 000 –í¬ª |
| #10 | 647 | 24.7 | ¬´–°—É–º–º–∞ 24.700 –í¬ª + ¬´–¥–æ–≥–æ–≤–æ—Ä–∞ 6474468208¬ª |
| #11 | 100 | 10000 | ¬´–ò—Ç–æ–≥–æ 10000 2¬ª, ¬´–°—É–º–º–∞ 10000 2¬ª |

**–ü—Ä–∏—á–∏–Ω–∞:** Legacy-–ø–∞—Ä—Å–µ—Ä –∏–º–µ–µ—Ç –±–∞–≥–∏:
- Regex `\d{1,3}` –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç ¬´100¬ª –∏–∑ ¬´10000¬ª
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ¬´direct pattern¬ª –Ω–∞–¥ ¬´scored amount¬ª –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω—É—é —Å—É–º–º—É
- –û—à–∏–±–∫–∏ OCR (2026‚Üí2829, 24.700‚Üí24.7) —É—Å—É–≥—É–±–ª—è—é—Ç –ø—Ä–æ–±–ª–µ–º—É

**–†–µ—à–µ–Ω–∏–µ:** –í–∫–ª—é—á–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º. ReceiptParser –¥–∞—ë—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—É–º–º—ã.

---

## –ß–µ–∫–∏ –±–µ–∑ raw_text (#2, #3, #4, #6, #12, #13)

OCR –Ω–µ –∏–∑–≤–ª—ë–∫ —Ç–µ–∫—Å—Ç –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–ø–∞–ª–∞ –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è. –î–ª—è PDF (#4, #6, #12, #13) –ø—Ä–∏ –≤–∫–ª—é—á—ë–Ω–Ω–æ–º —É–ª—É—á—à–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ pdftotext –∏–∑–≤–ª–µ—á—ë—Ç —Ç–µ–∫—Å—Ç –±–µ–∑ OCR.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–í–∫–ª—é—á–∏—Ç—å ¬´–£–ª—É—á—à–µ–Ω–Ω—ã–π¬ª —Ä–µ–∂–∏–º** –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–æ–∑—ã–≥—Ä—ã—à–∞:  
   https://auto.siteaccess.ru/bot ‚Üí Raffle Settings ‚Üí ¬´–ú–µ—Ç–æ–¥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—É–º–º—ã –∏ –¥–∞—Ç—ã¬ª ‚Üí **–£–ª—É—á—à–µ–Ω–Ω—ã–π**

2. **–ü–µ—Ä–µ—Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å** —á–µ–∫–∏ #7, #8, #11, #13: –∫–Ω–æ–ø–∫–∞ ¬´üîÑ –ü–µ—Ä–µ—Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —á–µ–∫–∞ (–¥–ª—è PDF).

3. **–†—É—á–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ü–∏—è** –¥–ª—è #9, #10: —Å—É–º–º—ã 16000 –∏ 24700 –ø–æ raw_text; legacy –¥–∞–ª 807 –∏ 647.
