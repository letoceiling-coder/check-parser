# LEXAUTO Raffle System v7.0 - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–∞—Ç–∞:** 2026-02-04  
**–í–µ—Ä—Å–∏—è:** 7.0 (Orders System)  
**–°—Ç–∞—Ç—É—Å:** Production Ready

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–ª–æ—É](#–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π-—Ñ–ª–æ—É)
4. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
5. [FSM (–ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)](#fsm-–∫–æ–Ω–µ—á–Ω—ã–π-–∞–≤—Ç–æ–º–∞—Ç)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∏-–±–æ—Ç–∞)
7. [–ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å](#–∞–¥–º–∏–Ω—Å–∫–∞—è-–ø–∞–Ω–µ–ª—å)
8. [–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è](#–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
10. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
11. [API Endpoints](#api-endpoints)
12. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

LEXAUTO Raffle System ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π –≤ Telegram —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É—á–µ—Ç–æ–º –º–µ—Å—Ç, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —á–µ–∫–æ–≤ –∏ –≤—ã–¥–∞—á–µ–π –Ω–æ–º–µ—Ä–∫–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç** ‚Äî –º–µ—Å—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞ 30 –º–∏–Ω—É—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞  
‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç race conditions** ‚Äî —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–≤–æ–π–Ω–æ–π –ø—Ä–æ–¥–∞–∂–∏  
‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–∏—á–∫–∏/—Å—Ç–∞—Ä–∏—á–∫–∏** ‚Äî —Ä–∞–∑–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –∏ –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ **–î–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø–æ–∫—É–ø–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–ª–µ—Ç—ã  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** ‚Äî Cron job –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –º–µ—Å—Ç–∞ –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏  
‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ —á–µ–∫–æ–≤** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É–º–º—ã –∏ –¥–∞—Ç—ã –∏–∑ PDF-—á–µ–∫–æ–≤  
‚úÖ **Web-–∞–¥–º–∏–Ω–∫–∞** ‚Äî —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏  
‚úÖ **Google Sheets** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤  

### –û—Ç–ª–∏—á–∏—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

| –í–µ—Ä—Å–∏—è 6.x (Checks) | –í–µ—Ä—Å–∏—è 7.0 (Orders) |
|---------------------|---------------------|
| –Æ–∑–µ—Ä —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫ | –Æ–∑–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ ‚Üí –±—Ä–æ–Ω—å ‚Üí —á–µ–∫ |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Å—É–º–º–µ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–±–∏—Ä–∞–µ—Ç —é–∑–µ—Ä |
| –ù–µ—Ç –±—Ä–æ–Ω–∏ –º–µ—Å—Ç | –ë—Ä–æ–Ω—å –Ω–∞ 30 –º–∏–Ω—É—Ç |
| –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è –≤—Å–µ—Ö | –†–∞–∑–Ω–æ–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤/—Å—Ç–∞—Ä–∏—á–∫–æ–≤ |
| –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç race conditions | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ + –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ |
| –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ | Cron job –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram Bot   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚ñ∫ TelegramWebhookController ‚îÄ‚îÄ‚ñ∫ FSM Logic
         ‚îÇ
         ‚îú‚îÄ‚ñ∫ Order Model (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
         ‚îÇ     ‚îú‚îÄ‚ñ∫ Ticket Model (–±–∏–ª–µ—Ç—ã)
         ‚îÇ     ‚îú‚îÄ‚ñ∫ Check Model (—á–µ–∫–∏)
         ‚îÇ     ‚îî‚îÄ‚ñ∫ BotUser Model (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
         ‚îÇ
         ‚îú‚îÄ‚ñ∫ Cron Job (orders:clear-expired)
         ‚îÇ
         ‚îî‚îÄ‚ñ∫ AdminPanel (React)
                 ‚îî‚îÄ‚ñ∫ API Controllers
```

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### 1. **Order** (–ó–∞–∫–∞–∑—ã)
–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Å–∏—Å—Ç–µ–º—ã v7.0

```php
Order {
    id
    telegram_bot_id
    raffle_id
    bot_user_id
    check_id (nullable)
    status: reserved|review|sold|rejected|expired
    reserved_until (timestamp, 30 –º–∏–Ω—É—Ç)
    quantity (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤)
    amount (—Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ)
    ticket_numbers (JSON –º–∞—Å—Å–∏–≤)
    reviewed_by, reviewed_at
    reject_reason, admin_notes
}
```

**–ú–µ—Ç–æ–¥—ã:**
- `createWithReservation()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è + lockForUpdate)
- `approve()` ‚Äî –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∏ –≤—ã–¥–∞—á–∞ –±–∏–ª–µ—Ç–æ–≤
- `reject()` ‚Äî –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç
- `edit()` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞/—Å—É–º–º—ã
- `cancelReservation()` ‚Äî –æ—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏
- `isExpired()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è –±—Ä–æ–Ω–∏

#### 2. **Ticket** (–ë–∏–ª–µ—Ç—ã)
```php
Ticket {
    id
    telegram_bot_id
    raffle_id
    number (1-500)
    bot_user_id (nullable, –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏)
    order_id (nullable, –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏)
    check_id
    issued_at
}
```

**–°–≤—è–∑–∏:**
- `order_id` ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –∑–∞–∫–∞–∑—É (–ø—Ä–∏ –±—Ä–æ–Ω–∏ `bot_user_id = null`)
- –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è: `bot_user_id` –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è, –±–∏–ª–µ—Ç –≤—ã–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

#### 3. **BotUser** (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
```php
BotUser {
    id
    telegram_bot_id
    telegram_user_id
    username, first_name, last_name
    role: user|admin
    fio_encrypted, phone_encrypted, inn_encrypted
    fsm_state, fsm_data (JSON)
    last_bot_message_id
    is_blocked
}
```

**FSM States:**
- `IDLE`, `WELCOME`
- `WAIT_FIO`, `WAIT_PHONE`
- `ASK_QUANTITY` ‚Äî –∑–∞–ø—Ä–æ—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ ‚≠êNEW
- `CONFIRM_ORDER` ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ ‚≠êNEW
- `ORDER_RESERVED` ‚Äî –∑–∞–∫–∞–∑ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω ‚≠êNEW
- `WAIT_CHECK_FOR_ORDER` ‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ —á–µ–∫–∞ ‚≠êNEW
- `ORDER_REVIEW`, `ORDER_SOLD`, `ORDER_REJECTED`, `ORDER_EXPIRED` ‚≠êNEW

#### 4. **Check** (–ß–µ–∫–∏)
```php
Check {
    id
    telegram_bot_id, raffle_id, bot_user_id
    file_path, file_type, file_size, file_hash
    amount, check_date, bank_code
    ocr_method, raw_text, parsing_confidence
    status: success|partial|failed
    review_status: pending|approved|rejected
    reviewed_by, reviewed_at
    admin_edited_amount
}
```

#### 5. **Raffle** (–†–æ–∑—ã–≥—Ä—ã—à–∏)
```php
Raffle {
    id
    telegram_bot_id
    name, status: active|completed|cancelled
    total_slots, slot_price, slots_mode
    winner_ticket_id, winner_bot_user_id
    total_participants, tickets_issued, total_revenue
    started_at, completed_at
}
```

---

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–ª–æ—É

### –°—Ü–µ–Ω–∞—Ä–∏–π A: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

```
/start
  ‚îÇ
  ‚îú‚îÄ –ú–µ—Å—Ç–∞ –µ—Å—Ç—å?
  ‚îÇ   ‚îú‚îÄ –ù–ï–¢ ‚Üí Sold Out message
  ‚îÇ   ‚îî‚îÄ –î–ê ‚Üí –ï—Å—Ç—å –§–ò–û/—Ç–µ–ª–µ—Ñ–æ–Ω –≤ –ë–î?
  ‚îÇ         ‚îú‚îÄ –ù–ï–¢ ‚Üí üëá
  ‚îÇ         ‚îî‚îÄ –î–ê ‚Üí –°—Ü–µ–Ω–∞—Ä–∏–π B
  ‚îÇ
  ‚ñº –°—Ü–µ–Ω–∞—Ä–∏–π A (–ù–æ–≤–∏—á–æ–∫)
  ‚îÇ
  1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: "–ü—Ä–∏–≤–µ—Ç! –†–∞–¥, —á—Ç–æ —Ç—ã —Ä–µ—à–∏–ª –ø–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å..."
     [üìù –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É]
  ‚îÇ
  2. STATE_WAIT_FIO
     ‚Üí –Æ–∑–µ—Ä –≤–≤–æ–¥–∏—Ç –§–ò–û
  ‚îÇ
  3. STATE_WAIT_PHONE
     ‚Üí –Æ–∑–µ—Ä –≤–≤–æ–¥–∏—Ç —Ç–µ–ª–µ—Ñ–æ–Ω
  ‚îÇ
  4. STATE_ASK_QUANTITY ‚≠êNEW
     ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ: "–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–π –Ω–∞–∫–ª–µ–π–∫–∏: 10000 —Ä—É–±."
     ‚Üí –ö–Ω–æ–ø–∫–∏: [1 —à—Ç.] [2 —à—Ç.] [5 —à—Ç.] [10 —à—Ç.] [‚úèÔ∏è –í–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ]
     ‚Üí –Æ–∑–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ N
  ‚îÇ
  5. STATE_CONFIRM_ORDER ‚≠êNEW
     ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ: "‚úÖ –ó–∞—è–≤–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞!\nüì¶ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: N —à—Ç.\nüí∞ –ö –æ–ø–ª–∞—Ç–µ: XXXX —Ä—É–±."
     ‚Üí –ö–Ω–æ–ø–∫–∏: [‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å] [‚ùå –û—Ç–º–µ–Ω–∏—Ç—å]
  ‚îÇ
  6. –ë–†–û–ù–ò–†–û–í–ê–ù–ò–ï (Order::createWithReservation) ‚≠êNEW
     ‚Üí –í —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
        - –ë–ª–æ–∫–∏—Ä—É–µ–º Raffle (lockForUpdate)
        - –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞
        - –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º N –±–∏–ª–µ—Ç–æ–≤ (order_id = X, bot_user_id = null)
        - –°–æ–∑–¥–∞–µ–º Order (status=reserved, reserved_until=now+30min)
        - Increment raffle->tickets_issued
     ‚Üí –ï—Å–ª–∏ —É—Å–ø–µ—Ö ‚Üí üëá
     ‚Üí –ï—Å–ª–∏ –Ω–µ—Ç –º–µ—Å—Ç ‚Üí "‚ö†Ô∏è –ú–µ—Å—Ç–∞ –∑–∞–Ω—è—Ç—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞."
  ‚îÇ
  7. STATE_ORDER_RESERVED ‚≠êNEW
     ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ: "‚úÖ –ó–∞—è–≤–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞! –ë—Ä–æ–Ω—å –Ω–∞ 30 –º–∏–Ω—É—Ç."
     ‚Üí QR-–∫–æ–¥ –¥–ª—è –æ–ø–ª–∞—Ç—ã
     ‚Üí –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: "–í–ù–ò–ú–ê–ù–ò–ï! –û–ø–ª–∞—á–∏–≤–∞–π—Ç–µ –û–î–ù–ò–ú –ü–õ–ê–¢–ï–ñ–û–ú..."
     ‚Üí –í—Ä–µ–º—è –±—Ä–æ–Ω–∏: –¥–æ HH:MM DD.MM.YYYY
     ‚Üí [‚ùå –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–∫–∞–∑]
  ‚îÇ
  8. STATE_WAIT_CHECK_FOR_ORDER ‚≠êNEW
     ‚Üí –Æ–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç PDF-—á–µ–∫
     ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ —á–µ–∫–∞ (pdftotext + OCR)
     ‚Üí –°–æ–∑–¥–∞–µ—Ç—Å—è Check
     ‚Üí Order.status ‚Üí 'review'
     ‚Üí Order.reserved_until ‚Üí null (—Ç–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
  ‚îÇ
  9. STATE_ORDER_REVIEW ‚≠êNEW
     ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ —é–∑–µ—Ä—É: "üìÑ –ß–µ–∫ –ø–æ–ª—É—á–µ–Ω! –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ —É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞."
     ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º —Å –∫–Ω–æ–ø–∫–∞–º–∏
  ‚îÇ
 10. –ê–î–ú–ò–ù –û–î–û–ë–†–Ø–ï–¢
     ‚Üí Order.approve()
        - –í —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
          * Tickets (order_id=X) ‚Üí bot_user_id=Y, issued_at=now
          * Order.status ‚Üí 'sold'
          * Order.ticket_numbers ‚Üí [55, 56, 57]
          * Check.review_status ‚Üí 'approved'
          * Raffle.updateStatistics()
          * Google Sheets –∑–∞–ø–∏—Å—å
     ‚Üí –°–æ–æ–±—â–µ–Ω–∏–µ —é–∑–µ—Ä—É: "‚úÖ –ü–ª–∞—Ç—ë–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω! üéâ\nüé´ –í–∞—à–∏ –Ω–æ–º–µ—Ä–∫–∏: 55, 56, 57"
  ‚îÇ
 11. STATE_ORDER_SOLD ‚≠êNEW
     ‚Üí –ó–∞–≤–µ—Ä—à–µ–Ω–æ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π B: –í–µ—Ä–Ω—É–≤—à–∏–π—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–î–æ–∫—É–ø–∫–∞)

```
/start
  ‚îÇ
  ‚îú‚îÄ –ú–µ—Å—Ç–∞ –µ—Å—Ç—å?
  ‚îÇ   ‚îú‚îÄ –ù–ï–¢ ‚Üí Sold Out (—Å –Ω–æ–º–µ—Ä–∞–º–∏ –∏–ª–∏ –±–µ–∑)
  ‚îÇ   ‚îî‚îÄ –î–ê ‚Üí –ï—Å—Ç—å –§–ò–û/—Ç–µ–ª–µ—Ñ–æ–Ω?
  ‚îÇ         ‚îú‚îÄ –ù–ï–¢ ‚Üí –°—Ü–µ–Ω–∞—Ä–∏–π A
  ‚îÇ         ‚îî‚îÄ –î–ê ‚Üí üëá
  ‚îÇ
  ‚ñº –°—Ü–µ–Ω–∞—Ä–∏–π B (–°—Ç–∞—Ä–∏—á–æ–∫)
  ‚îÇ
  1. –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: "–†–∞–¥ –≤–∏–¥–µ—Ç—å —Ç–µ–±—è —Å–Ω–æ–≤–∞, {–ò–º—è}! ü§ù"
     ‚Üí –ï—Å–ª–∏ –µ—Å—Ç—å –±–∏–ª–µ—Ç—ã: "–¢–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ –Ω–æ–º–µ—Ä–∞: 10, 11"
     ‚Üí "–•–æ—á–µ—à—å –¥–æ–∫—É–ø–∏—Ç—å –µ—â—ë –Ω–∞–∫–ª–µ–µ–∫?"
     ‚Üí [üéØ –ö—É–ø–∏—Ç—å –µ—â—ë]
  ‚îÇ
  2. STATE_ASK_QUANTITY ‚≠êNEW
     ‚Üí (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å—Ü–µ–Ω–∞—Ä–∏—é A, —à–∞–≥ 4)
  ‚îÇ
  3-11. –î–∞–ª–µ–µ –∫–∞–∫ –≤ —Å—Ü–µ–Ω–∞—Ä–∏–∏ A
```

### –°—Ü–µ–Ω–∞—Ä–∏–π C: Sold Out

```
/start ‚Üí –ú–µ—Å—Ç–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
  ‚îÇ
  ‚îú‚îÄ –ï—Å—Ç—å –±–∏–ª–µ—Ç—ã —É —é–∑–µ—Ä–∞?
  ‚îÇ   ‚îú‚îÄ –î–ê ‚Üí "‚õîÔ∏è –ú–µ—Å—Ç–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!\n–¢—ã —É–∂–µ –≤ –∏–≥—Ä–µ, –Ω–æ–º–µ—Ä–∞: X, Y"
  ‚îÇ   ‚îî‚îÄ –ù–ï–¢ ‚Üí "‚õîÔ∏è –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤—Å–µ –º–µ—Å—Ç–∞ –∑–∞–Ω—è—Ç—ã.\n
  ‚îÇ              –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –Ω–µ –æ–ø–ª–∞—Ç–∏—Ç –±—Ä–æ–Ω—å, –º–µ—Å—Ç–æ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è."
```

### –°—Ü–µ–Ω–∞—Ä–∏–π D: –ò—Å—Ç–µ—á–µ–Ω–∏–µ –±—Ä–æ–Ω–∏

```
Order (status=reserved, reserved_until < now)
  ‚îÇ
  ‚ñº Cron Job (orders:clear-expired) ‚Äî –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
  ‚îÇ
  1. –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ Orders
  2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ Order:
     ‚Üí –í —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
        * Tickets (order_id=X) ‚Üí order_id=null, bot_user_id=null
        * Raffle.decrement('tickets_issued', N)
        * Order.status ‚Üí 'expired'
        * BotUser.resetState()
     ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —é–∑–µ—Ä—É: "‚è∞ –í—Ä–µ–º—è –±—Ä–æ–Ω–∏ –∏—Å—Ç–µ–∫–ª–æ! –ú–µ—Å—Ç–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã."
```

---

## FSM (–ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)

### –ù–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è v7.0

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–µ—Ä–µ—Ö–æ–¥ |
|-----------|----------|---------|
| `ASK_QUANTITY` | –ó–∞–ø—Ä–æ—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–∏–ª–µ—Ç–æ–≤ | ‚Üí CONFIRM_ORDER |
| `CONFIRM_ORDER` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | ‚Üí ORDER_RESERVED |
| `ORDER_RESERVED` | –ó–∞–∫–∞–∑ –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω, –æ–∂–∏–¥–∞–Ω–∏–µ —á–µ–∫–∞ | ‚Üí WAIT_CHECK_FOR_ORDER |
| `WAIT_CHECK_FOR_ORDER` | –û–∂–∏–¥–∞–Ω–∏–µ PDF-—á–µ–∫–∞ –¥–ª—è –∑–∞–∫–∞–∑–∞ | ‚Üí ORDER_REVIEW |
| `ORDER_REVIEW` | –ó–∞–∫–∞–∑ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ —É –∞–¥–º–∏–Ω–∞ | ‚Üí ORDER_SOLD / ORDER_REJECTED |
| `ORDER_SOLD` | –ó–∞–∫–∞–∑ –æ–¥–æ–±—Ä–µ–Ω, –±–∏–ª–µ—Ç—ã –≤—ã–¥–∞–Ω—ã | –ö–æ–Ω–µ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ |
| `ORDER_REJECTED` | –ó–∞–∫–∞–∑ –æ—Ç–∫–ª–æ–Ω–µ–Ω | –ú–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å |
| `ORDER_EXPIRED` | –ë—Ä–æ–Ω—å –∏—Å—Ç–µ–∫–ª–∞ | ‚Üí IDLE |

### –°—Ö–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

```
IDLE ‚Üí WELCOME
  ‚îú‚îÄ –ù–æ–≤–∏—á–æ–∫: WAIT_FIO ‚Üí WAIT_PHONE ‚Üí ASK_QUANTITY
  ‚îî‚îÄ –°—Ç–∞—Ä–∏—á–æ–∫: ASK_QUANTITY

ASK_QUANTITY ‚Üí CONFIRM_ORDER ‚Üí ORDER_RESERVED 
  ‚Üí WAIT_CHECK_FOR_ORDER ‚Üí ORDER_REVIEW
  ‚îú‚îÄ –û–¥–æ–±—Ä–µ–Ω–æ: ORDER_SOLD ‚úÖ
  ‚îú‚îÄ –û—Ç–∫–ª–æ–Ω–µ–Ω–æ: ORDER_REJECTED ‚Üí ASK_QUANTITY (–ø–æ–≤—Ç–æ—Ä)
  ‚îî‚îÄ –ò—Å—Ç–µ–∫–ª–æ: ORDER_EXPIRED ‚Üí IDLE
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

### BotSettings Model

#### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|----------|---------|
| `total_slots` | integer | –õ–∏–º–∏—Ç –º–µ—Å—Ç –≤ —Ä–æ–∑—ã–≥—Ä—ã—à–µ | 500 |
| `slot_price` | decimal | –¶–µ–Ω–∞ –∑–∞ 1 –±–∏–ª–µ—Ç | 10000.00 |
| `slots_mode` | string | –†–µ–∂–∏–º –≤—ã–¥–∞—á–∏: sequential/random | sequential |
| `is_active` | boolean | –†–æ–∑—ã–≥—Ä—ã—à –∞–∫—Ç–∏–≤–µ–Ω? | true |
| `qr_image_path` | string | –ü—É—Ç—å –∫ QR-–∫–æ–¥—É | bot-assets/qr.jpg |
| `payment_description` | string | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ | "–û–ø–ª–∞—Ç–∞ –Ω–∞–∫–ª–µ–π–∫–∏" |
| `google_sheet_url` | string | –°—Å—ã–ª–∫–∞ –Ω–∞ Google –¢–∞–±–ª–∏—Ü—É | https://docs.google.com/... |
| `receipt_parser_method` | string | –ú–µ—Ç–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ–∫–æ–≤ | enhanced / enhanced_ai |

#### –°–æ–æ–±—â–µ–Ω–∏—è (–Ω–æ–≤—ã–µ –≤ v7.0)

| –ö–ª—é—á | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ |
|------|----------|------------|
| `msg_welcome_new` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ | ‚Äî |
| `msg_welcome_returning` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –¥–ª—è —Å—Ç–∞—Ä–∏—á–∫–æ–≤ | `{first_name}`, `{ticket_numbers}` |
| `msg_sold_out_with_tickets` | Sold Out (—Å –±–∏–ª–µ—Ç–∞–º–∏) | `{ticket_numbers}` |
| `msg_sold_out_no_tickets` | Sold Out (–±–µ–∑ –±–∏–ª–µ—Ç–æ–≤) | ‚Äî |
| `msg_ask_quantity` | –ó–∞–ø—Ä–æ—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ | `{price}`, `{available_slots}` |
| `msg_confirm_order` | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ | `{quantity}`, `{amount}` |
| `msg_order_reserved` | –ë—Ä–æ–Ω—å —Å–æ–∑–¥–∞–Ω–∞ | `{quantity}`, `{amount}` |
| `msg_payment_instructions` | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ–ø–ª–∞—Ç–µ | ‚Äî |
| `msg_order_approved` | –ó–∞–∫–∞–∑ –æ–¥–æ–±—Ä–µ–Ω | `{ticket_numbers}` |
| `msg_order_rejected` | –ó–∞–∫–∞–∑ –æ—Ç–∫–ª–æ–Ω–µ–Ω | `{reason}` |
| `msg_order_expired` | –ë—Ä–æ–Ω—å –∏—Å—Ç–µ–∫–ª–∞ | `{quantity}` |
| `msg_insufficient_slots` | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç | `{requested}`, `{available}` |

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://auto.siteaccess.ru/bot-settings
2. –í—ã–±—Ä–∞—Ç—å –±–æ—Ç–∞
3. –í–∫–ª–∞–¥–∫–∞ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ–∑—ã–≥—Ä—ã—à–∞":
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç (total_slots)
   - –¶–µ–Ω–∞ –∑–∞ –±–∏–ª–µ—Ç (slot_price)
   - –†–µ–∂–∏–º –≤—ã–¥–∞—á–∏ (sequential / random)
   - QR-–∫–æ–¥ (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
   - Google Sheets URL
4. –í–∫–ª–∞–¥–∫–∞ "–°–æ–æ–±—â–µ–Ω–∏—è":
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ–∫—Å—Ç–æ–≤
   - Preview –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## –ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤ (Orders)

#### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É

–ö–æ–≥–¥–∞ —é–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ–∫, –≤—Å–µ–º –∞–¥–º–∏–Ω–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç:

```
üîî –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É! (Orders v7.0)

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω (@ivan)
üì± –¢–µ–ª–µ—Ñ–æ–Ω: +79991234567
üì¶ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2 —à—Ç.
üí∞ –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞: 20 000 —Ä—É–±.

üìÑ –ß–µ–∫:
   ‚Ä¢ –°—É–º–º–∞ –ø–æ —á–µ–∫—É: 20000.00 —Ä—É–±.
   ‚Ä¢ –î–∞—Ç–∞: 04.02.2026 15:30
   ‚Ä¢ –°—Ç–∞—Ç—É—Å –ø–∞—Ä—Å–∏–Ω–≥–∞: success
   ‚Ä¢ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 95%

[PDF-—Ñ–∞–π–ª —á–µ–∫–∞]

–î–µ–π—Å—Ç–≤–∏—è:
[‚úÖ –û–¥–æ–±—Ä–∏—Ç—å] [‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å]
[‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å]
```

#### –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**–ö–Ω–æ–ø–∫–∞:** `‚úÖ –û–¥–æ–±—Ä–∏—Ç—å`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞: `order->status == 'review'`
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:
   - Tickets (order_id=X) ‚Üí bot_user_id=Y, issued_at=now
   - Order.status ‚Üí 'sold'
   - Order.ticket_numbers ‚Üí [55, 56, 57]
   - Check.review_status ‚Üí 'approved'
   - Raffle.updateStatistics()
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —é–∑–µ—Ä—É: "‚úÖ –ü–ª–∞—Ç—ë–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω! –í–∞—à–∏ –Ω–æ–º–µ—Ä–∫–∏: 55, 56, 57"
4. –ó–∞–ø–∏—Å—å –≤ Google Sheets
5. –õ–æ–≥: `AdminActionLog` (action='order_approved')

**–°–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É:**
```
‚úÖ –ó–∞–∫–∞–∑ #123 –æ–¥–æ–±—Ä–µ–Ω

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω
–ù–æ–º–µ—Ä–∞: 55, 56, 57
```

#### –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**–ö–Ω–æ–ø–∫–∞:** `‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞: `order->status == 'review'`
2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:
   - Tickets (order_id=X) ‚Üí order_id=null, bot_user_id=null (–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ)
   - Raffle.decrement('tickets_issued', N)
   - Order.status ‚Üí 'rejected'
   - Check.review_status ‚Üí 'rejected'
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —é–∑–µ—Ä—É: "‚ùå –ß–µ–∫ –Ω–µ –ø—Ä–∏–Ω—è—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø–ª–∞—Ç—É –∏ –æ—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞—è–≤–∫—É –∑–∞–Ω–æ–≤–æ"
4. –õ–æ–≥: `AdminActionLog` (action='order_rejected')

**–°–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É:**
```
‚ùå –ó–∞–∫–∞–∑ #123 –æ—Ç–∫–ª–æ–Ω—ë–Ω

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ò–≤–∞–Ω
–ú–µ—Å—Ç–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã
```

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

**–ö–Ω–æ–ø–∫–∞:** `‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å`

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –Æ–∑–µ—Ä –æ–ø–ª–∞—Ç–∏–ª —á–∞—Å—Ç—è–º–∏ –∏–ª–∏ —Å—É–º–º–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–æ–∫–∞–∑ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:
   ```
   ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ #123
   
   –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
   ‚Ä¢ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 2 —à—Ç.
   ‚Ä¢ –°—É–º–º–∞: 20 000 —Ä—É–±.
   ‚Ä¢ –°—É–º–º–∞ –ø–æ —á–µ–∫—É: 15 000 —Ä—É–±.
   
   –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤:
   ```
2. –ê–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `1`)
3. Order.edit(newQuantity=1, newAmount=10000)
   - –í —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
     * –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å ‚Üí —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–ª–µ—Ç—ã
     * –ï—Å–ª–∏ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å ‚Üí –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º –ª–∏—à–Ω–∏–µ –±–∏–ª–µ—Ç—ã
     * –û–±–Ω–æ–≤–ª—è–µ–º Order.quantity, Order.amount
     * Check.admin_edited_amount = newAmount
4. –ü–æ—Å–ª–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ‚Üí –∫–Ω–æ–ø–∫–∞ "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å" —Å–Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–Ω–∞

---

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### Cron Job: –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –±—Ä–æ–Ω–µ–π

**–ö–æ–º–∞–Ω–¥–∞:** `php artisan orders:clear-expired`  
**–ß–∞—Å—Ç–æ—Ç–∞:** –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É  
**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** `bootstrap/app.php` ‚Üí `withSchedule()`

#### –ê–ª–≥–æ—Ä–∏—Ç–º

```php
1. –ù–∞–π—Ç–∏ Orders:
   WHERE status = 'reserved'
   AND reserved_until < now()

2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ Order:
   BEGIN TRANSACTION
     2.1. –û—Å–≤–æ–±–æ–¥–∏—Ç—å –±–∏–ª–µ—Ç—ã:
          UPDATE tickets
          SET order_id = NULL, bot_user_id = NULL
          WHERE order_id = X

     2.2. –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à:
          UPDATE raffles
          SET tickets_issued = tickets_issued - N
          WHERE id = raffle_id

     2.3. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑:
          UPDATE orders
          SET status = 'expired',
              reject_reason = '–í—Ä–µ–º—è –±—Ä–æ–Ω–∏ –∏—Å—Ç–µ–∫–ª–æ'
          WHERE id = X

     2.4. –°–±—Ä–æ—Å–∏—Ç—å FSM —é–∑–µ—Ä–∞:
          UPDATE bot_users
          SET fsm_state = 'IDLE', fsm_data = NULL
          WHERE id = user_id
   COMMIT

3. –£–≤–µ–¥–æ–º–∏—Ç—å —é–∑–µ—Ä–∞:
   "‚è∞ –í—Ä–µ–º—è –±—Ä–æ–Ω–∏ –∏—Å—Ç–µ–∫–ª–æ! –ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω. –ú–µ—Å—Ç–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã."

4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
   Log::info("Order #{X} expired and cleared")
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

1. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Laravel Scheduler —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   php artisan schedule:list
   ```
   –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å: `orders:clear-expired ... 1 minute`

2. –î–æ–±–∞–≤–∏—Ç—å –≤ crontab:
   ```bash
   crontab -e
   ```
   ```
   * * * * * cd /var/www/auto.siteaccess.ru && php artisan schedule:run >> /dev/null 2>&1
   ```

3. –ü—Ä–æ–≤–µ—Ä–∫–∞:
   ```bash
   php artisan orders:clear-expired
   ```

4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤:
   ```bash
   tail -f storage/logs/laravel.log | grep "Order.*expired"
   ```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Race Conditions

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ —é–∑–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—ã—Ç–∞—é—Ç—Å—è –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –º–µ—Å—Ç–æ.

**–†–µ—à–µ–Ω–∏–µ:** –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ + –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

```php
DB::transaction(function () {
    // 1. –ë–ª–æ–∫–∏—Ä—É–µ–º —Ä–æ–∑—ã–≥—Ä—ã—à
    $raffle = Raffle::where('id', $raffleId)
        ->where('status', Raffle::STATUS_ACTIVE)
        ->lockForUpdate() // ‚≠ê CRITICAL
        ->first();
    
    // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Å—Ç–∞
    $available = $raffle->total_slots - $raffle->tickets_issued;
    if ($available < $quantity) {
        throw new \Exception("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç");
    }
    
    // 3. –†–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –±–∏–ª–µ—Ç—ã
    $tickets = Ticket::where('raffle_id', $raffleId)
        ->whereNull('bot_user_id')
        ->whereNull('order_id')
        ->limit($quantity)
        ->lockForUpdate() // ‚≠ê CRITICAL
        ->get();
    
    // 4. –°–æ–∑–¥–∞–µ–º –∑–∞–∫–∞–∑ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    // ...
});
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω, –ò–ù–ù** —à–∏—Ñ—Ä—É—é—Ç—Å—è –≤ –ë–î:

```php
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
$botUser->fio = '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω'; // auto-encrypt
$botUser->save();

// –ß—Ç–µ–Ω–∏–µ
$fio = $botUser->fio; // auto-decrypt
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** `.env` ‚Üí `APP_KEY`

**–í–ê–ñ–ù–û:** –ù–µ —Ç–µ—Ä—è—Ç—å `APP_KEY`! –ë–µ–∑ –Ω–µ–≥–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞

–ü–µ—Ä–µ–¥ –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º:

```php
if (!$botUser->isAdmin()) {
    return; // –∏–ª–∏ HTTP 403
}
```

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞:
1. –Æ–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/admin`
2. –°–æ–∑–¥–∞–µ—Ç—Å—è `AdminRequest` (status=pending)
3. –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω –≤ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –æ–¥–æ–±—Ä—è–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç
4. BotUser.role ‚Üí 'admin'

---

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ú–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
php artisan migrate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
php artisan tinker
>>> \DB::select("SHOW TABLES LIKE 'orders'");
>>> \DB::select("SHOW TABLES LIKE 'tickets'");
```

**–ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ v7.0:**
- `2026_02_05_000000_create_orders_table.php`
- `2026_02_05_000001_add_order_id_to_tickets_table.php`
- `2026_02_05_000002_add_new_messages_to_bot_settings.php`

### 2. Cron Job

```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
* * * * * cd /var/www/auto.siteaccess.ru && php artisan schedule:run >> /dev/null 2>&1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
php artisan schedule:list
php artisan orders:clear-expired
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –±–æ—Ç–∞ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
php artisan tinker
>>> $bot = \App\Models\TelegramBot::first();
>>> $settings = \App\Models\BotSettings::getOrCreate($bot->id);
>>> $settings->total_slots = 500;
>>> $settings->slot_price = 10000;
>>> $settings->is_active = true;
>>> $settings->save();
```

### 4. QR-–∫–æ–¥

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å QR-–∫–æ–¥
cp qr-code.jpg storage/app/public/bot-assets/qr.jpg

# –û–±–Ω–æ–≤–∏—Ç—å –ø—É—Ç—å
php artisan tinker
>>> $settings = \App\Models\BotSettings::first();
>>> $settings->qr_image_path = 'bot-assets/qr.jpg';
>>> $settings->save();
```

### 5. Frontend (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

```bash
cd frontend
npm run build
# –§–∞–π–ª—ã –ø–æ–ø–∞–¥—É—Ç –≤ public/
```

### 6. –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

```bash
php artisan config:clear
php artisan cache:clear
php artisan route:clear
php artisan view:clear
```

---

## API Endpoints

### Orders API (–±—É–¥–µ—Ç –≤ –≠–¢–ê–ü 12)

```
GET    /api/orders              –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
GET    /api/orders/{id}         –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
POST   /api/orders/{id}/approve –û–¥–æ–±—Ä–∏—Ç—å
POST   /api/orders/{id}/reject  –û—Ç–∫–ª–æ–Ω–∏—Ç—å
POST   /api/orders/{id}/edit    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
GET    /api/orders/stats        –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API

```
GET    /api/checks              –°–ø–∏—Å–æ–∫ —á–µ–∫–æ–≤
POST   /api/checks/reparse-failed  –ü–µ—Ä–µ–æ–±—Ä–∞–±–æ—Ç–∞—Ç—å failed
GET    /api/raffles             –°–ø–∏—Å–æ–∫ —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π
POST   /api/raffles             –°–æ–∑–¥–∞—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à
POST   /api/raffles/{id}/complete  –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à
GET    /api/bot-users           –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/tickets             –°–ø–∏—Å–æ–∫ –±–∏–ª–µ—Ç–æ–≤
GET    /api/admin-requests      –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –∞–¥–º–∏–Ω–∞
```

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–æ–∑—ã–≥—Ä—ã—à–∞

```php
$raffle = Raffle::createForBot(
    botId: 1,
    name: '–†–æ–∑—ã–≥—Ä—ã—à #1 - –§–µ–≤—Ä–∞–ª—å 2026'
);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∏–ª–µ—Ç—ã
Ticket::initializeForBot(
    telegramBotId: 1,
    totalSlots: 500,
    raffleId: $raffle->id
);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```php
$stats = Order::getStats(telegramBotId: 1, raffleId: 1);

/*
[
    'total' => 150,
    'reserved' => 5,
    'review' => 10,
    'sold' => 130,
    'rejected' => 3,
    'expired' => 2,
    'total_revenue' => 1300000.00,
    'pending_revenue' => 150000.00,
]
*/
```

### –†—É—á–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞

```php
$order = Order::find(123);
$adminUserId = 1;

if ($order->isReview()) {
    $success = $order->approve($adminUserId);
    
    if ($success) {
        echo "–ó–∞–∫–∞–∑ –æ–¥–æ–±—Ä–µ–Ω. –ù–æ–º–µ—Ä–∞: " . implode(', ', $order->ticket_numbers);
    }
}
```

### –û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–π –±—Ä–æ–Ω–∏ –≤—Ä—É—á–Ω—É—é

```php
$order = Order::find(123);

if ($order->isExpired()) {
    $order->cancelReservation('–†—É—á–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –∞–¥–º–∏–Ω–æ–º');
}
```

---

## FAQ

### Q: –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –µ—Å–ª–∏ —é–∑–µ—Ä –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç —á–µ–∫ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç?

**A:** Cron job –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û—Å–≤–æ–±–æ–¥–∏—Ç –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã
2. –ò–∑–º–µ–Ω–∏—Ç Order.status –Ω–∞ 'expired'
3. –£–º–µ–Ω—å—à–∏—Ç raffle->tickets_issued
4. –û—Ç–ø—Ä–∞–≤–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —é–∑–µ—Ä—É
5. –°–±—Ä–æ—Å–∏—Ç FSM —é–∑–µ—Ä–∞ –≤ IDLE

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –±—Ä–æ–Ω–∏?

**A:** –î–∞. –í `Order::createWithReservation()` –ø–∞—Ä–∞–º–µ—Ç—Ä `$reservationMinutes` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30).

```php
$order = Order::createWithReservation(
    // ...
    reservationMinutes: 60 // 1 —á–∞—Å –≤–º–µ—Å—Ç–æ 30 –º–∏–Ω—É—Ç
);
```

### Q: –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é "—é–∑–µ—Ä –æ–ø–ª–∞—Ç–∏–ª —á–∞—Å—Ç—è–º–∏"?

**A:** –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å":
1. –í–≤–æ–¥–∏—Ç —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∏–ª–µ—Ç–æ–≤
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –±—Ä–æ–Ω—å
3. –ê–¥–º–∏–Ω –æ–¥–æ–±—Ä—è–µ—Ç

### Q: –ß—Ç–æ –µ—Å–ª–∏ –¥–≤–∞ —é–∑–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±—Ä–æ–Ω–∏—Ä—É—é—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –º–µ—Å—Ç–æ?

**A:** –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å `lockForUpdate()` –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —É—Å–ø–µ—à–Ω–æ –∑–∞–±—Ä–æ–Ω–∏—Ä—É–µ—Ç. –í—Ç–æ—Ä–æ–π –ø–æ–ª—É—á–∏—Ç –æ—à–∏–±–∫—É "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç".

### Q: –ú–æ–∂–Ω–æ –ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º–µ (Checks –±–µ–∑ Orders)?

**A:** –î–∞. –°—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏. –ù–æ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (Orders v7.0) –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ.

### Q: –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Google Sheets?

**A:** –°–º. –≠–¢–ê–ü 10 –≤ –ø–ª–∞–Ω–µ (–±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ). –ó–∞–≥–ª—É—à–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ `writeOrderToGoogleSheets()`.

### Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞?

**A:** 
1. –Æ–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/admin` –≤ –±–æ—Ç–µ
2. –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω –≤ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ (Admin Requests) –æ–¥–æ–±—Ä—è–µ—Ç
3. –ò–ª–∏ –≤—Ä—É—á–Ω—É—é: 
   ```php
   $botUser->makeAdmin();
   ```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

LEXAUTO Raffle System v7.0 ‚Äî –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ä–æ–∑—ã–≥—Ä—ã—à–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

‚úÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Å—Ç  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞  
‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–∏—á–∫–∏/—Å—Ç–∞—Ä–∏—á–∫–∏  
‚úÖ –î–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–æ–≤  
‚úÖ –ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å  
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets (–≥–æ—Ç–æ–≤–æ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é)  

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –≠–¢–ê–ü 10: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å GoogleSheetsService
2. –≠–¢–ê–ü 12: –°–æ–∑–¥–∞—Ç—å Web-–∞–¥–º–∏–Ω–∫—É –¥–ª—è Orders (React)
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** 
- GitHub: [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π](https://github.com/letoceiling-coder/check-parser)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/`
- –õ–æ–≥–∏: `storage/logs/laravel.log`
